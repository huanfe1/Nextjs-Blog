{"title":"利用 Github-Action 实现将 Github 代码同步到Gitee","date":"2022-05-29","content":"\n            <p>\n                利用 Github Action 实现将 Github 上面的代码同步到 Gitee 中\n            </p>\n        \n            <p>\n                同步的原理是利用 SSH 公私钥配对的方式拉取 Github 仓库的代码并推送到 Gitee 仓库中，所以我们需要以下几个步骤\n            </p>\n        \n            <h2 class=\"notion-heading_2 notion-color-default\">\n                生成 SSH 公私钥\n            </h2>\n        \n            <p>\n                在 git Bash 中输入 <code class=\"notion-text-code\">$ ssh-keygen -t ed25519 -C \"me@gitee\"</code>\n            </p>\n        \n            <p>\n                然后按照提示完成三次回车后便会在用户根目录下的 <code class=\"notion-text-code\">.ssh</code> 目录下生成三个文件\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img14.360buyimg.com/ddimg/jfs/t1/43826/5/21493/6274/637c4d67E33721cab/79428d387f3e470f.png\" />\n                \n            </figure>\n        \n            <p>\n                打开 <code class=\"notion-text-code\">id_ed25519.pub</code> 获取生成的<b class=\"notion-text-bold\">公钥</b>\n            </p>\n        \n            <p>\n                打开 <code class=\"notion-text-code\">id_ed25519</code> 获取生成的<b class=\"notion-text-bold\">私钥</b>\n            </p>\n        \n            <h2 class=\"notion-heading_2 notion-color-default\">\n                添加公钥\n            </h2>\n        \n            <p>\n                将 SSH 生成的<b class=\"notion-text-bold\">公钥</b>分别添加到 <a href=\"https://github.com/settings/ssh/new\" class=\"notion-text-href\">Github</a> 跟 <a href=\"https://gitee.com/profile/sshkeys\" class=\"notion-text-href\">Gitee</a> 中\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img11.360buyimg.com/ddimg/jfs/t1/114196/39/31107/7478/637c4d84Ecfd6e235/023a2cdfd1a88b4e.png\" />\n                \n            </figure>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img13.360buyimg.com/ddimg/jfs/t1/93046/11/33435/8182/637c4d95E976699fd/c187fecf8981491e.png\" />\n                \n            </figure>\n        \n            <h2 class=\"notion-heading_2 notion-color-default\">\n                添加私钥\n            </h2>\n        \n            <p>\n                <i class=\"notion-text-italic\">如果你还没有生成与 Github 相对应的 Gitee 仓库，记得先创建，推荐使用 url 导入的方式创建</i>\n            </p>\n        \n            <p>\n                在需要同步的 Github 仓库里面依次进入 <code class=\"notion-text-code\">Settings > Secrets > Actions</code>\n            </p>\n        \n            <p>\n                点击 <code class=\"notion-text-code\">New repository secret</code> 按钮\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img11.360buyimg.com/ddimg/jfs/t1/193661/34/28519/41347/637c4da3E5c0c77ed/993a8dc2e0fa39f3.png\" />\n                \n            </figure>\n        \n            <p>\n                <code class=\"notion-text-code\">name</code> 这里使用 <code class=\"notion-text-code\">GITEE_PRIVATE_KEY</code>\n            </p>\n        \n            <p>\n                <code class=\"notion-text-code\">Value</code> 填之前生成的<b class=\"notion-text-bold\">私钥</b>\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img12.360buyimg.com/ddimg/jfs/t1/197658/5/29865/13536/637c4db0Ec575e440/d230f5743d5981ad.png\" />\n                \n            </figure>\n        \n            <h2 class=\"notion-heading_2 notion-color-default\">\n                配置代码\n            </h2>\n        \n            <p>\n                在需要同步的 Github 仓库根目录下创建 <code class=\"notion-text-code\">.github/workflows</code> 文件夹，并在该目录下创建后缀为 <code class=\"notion-text-code\">yml</code> 的文件\n            </p>\n        \n            <p>\n                这里命名为 <code class=\"notion-text-code\">sync-gitee.yml</code>\n            </p>\n        \n            <p>\n                该文件里面填入以下内容\n            </p>\n        \n            <div class=\"notion-code\">\n                <pre><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Sync</span> <span class=\"hljs-string\">To</span> <span class=\"hljs-string\">Gitee</span>\n\n<span class=\"hljs-attr\">on:</span> [<span class=\"hljs-string\">push</span>, <span class=\"hljs-string\">delete</span>, <span class=\"hljs-string\">create</span>]\n\n<span class=\"hljs-attr\">jobs:</span>\n    <span class=\"hljs-attr\">sync:</span>\n        <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n        <span class=\"hljs-attr\">steps:</span>\n            <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Sync</span> <span class=\"hljs-string\">to</span> <span class=\"hljs-string\">Gitee</span>\n              <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">wearerequired/git-mirror-action@master</span>\n              <span class=\"hljs-attr\">env:</span>\n                  <span class=\"hljs-attr\">SSH_PRIVATE_KEY:</span> <span class=\"hljs-string\">${{</span> <span class=\"hljs-string\">secrets.GITEE_PRIVATE_KEY</span> <span class=\"hljs-string\">}}</span>\n              <span class=\"hljs-attr\">with:</span>\n                  <span class=\"hljs-attr\">source-repo:</span>\n                  <span class=\"hljs-attr\">destination-repo:</span></code></pre>\n                \n            </div>\n        \n            <p>\n                其中 <code class=\"notion-text-code\">source-repo</code> 为 Github 仓库 SSH 地址\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img13.360buyimg.com/ddimg/jfs/t1/129691/21/28089/17717/637c4dbcE88ac195c/74d79474c994392a.png\" />\n                \n            </figure>\n        \n            <p>\n                <code class=\"notion-text-code\">destination-repo</code> 为 Gitee 仓库 SSH 地址\n            </p>\n        \n            <figure class=\"notion-image\">\n                <img src=\"https://img12.360buyimg.com/ddimg/jfs/t1/17721/2/20280/13146/637c4dc5E3cadb03c/7de9de23440e95f6.png\" />\n                \n            </figure>\n        \n            <h2 class=\"notion-heading_2 notion-color-default\">\n                结语\n            </h2>\n        \n            <p>\n                <a href=\"about:blank#%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5\" class=\"notion-text-href\">添加公钥</a> 的操作只需执行一次，但 <a href=\"#%E6%B7%BB%E5%8A%A0%E7%A7%81%E9%92%A5\" class=\"notion-text-href\">添加私钥</a> 跟 <a href=\"about:blank#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81\" class=\"notion-text-href\">配置代码</a> 需要每个仓库执行一次，<b class=\"notion-text-bold\">所以请务必保存好私钥</b>，以备后续使用。\n            </p>\n        \n            <p>\n                \n            </p>\n        ","tags":["GitHub"],"slug":"2be65f67","wordcount":325,"excerpt":"利用GithubAction实现将Github上面的代码同步到Gitee中,同步的原理是利用SSH公私钥配对的方式拉取Github仓库的代码并推送到Gitee仓库中，所以我们需要以下几个步骤,在gitBash中输入$ssh-keyge..."}